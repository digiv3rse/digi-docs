"use strict";(self.webpackChunkdigi_docusaurus_v_1=self.webpackChunkdigi_docusaurus_v_1||[]).push([[9426],{5680:(e,n,t)=>{t.d(n,{xA:()=>p,yg:()=>h});var a=t(6540);function r(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function i(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function s(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?i(Object(t),!0).forEach((function(n){r(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):i(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function o(e,n){if(null==e)return{};var t,a,r=function(e,n){if(null==e)return{};var t,a,r={},i=Object.keys(e);for(a=0;a<i.length;a++)t=i[a],n.indexOf(t)>=0||(r[t]=e[t]);return r}(e,n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)t=i[a],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(r[t]=e[t])}return r}var l=a.createContext({}),d=function(e){var n=a.useContext(l),t=n;return e&&(t="function"==typeof e?e(n):s(s({},n),e)),t},p=function(e){var n=d(e.components);return a.createElement(l.Provider,{value:n},e.children)},c="mdxType",g={inlineCode:"code",wrapper:function(e){var n=e.children;return a.createElement(a.Fragment,{},n)}},u=a.forwardRef((function(e,n){var t=e.components,r=e.mdxType,i=e.originalType,l=e.parentName,p=o(e,["components","mdxType","originalType","parentName"]),c=d(t),u=r,h=c["".concat(l,".").concat(u)]||c[u]||g[u]||i;return t?a.createElement(h,s(s({ref:n},p),{},{components:t})):a.createElement(h,s({ref:n},p))}));function h(e,n){var t=arguments,r=n&&n.mdxType;if("string"==typeof e||r){var i=t.length,s=new Array(i);s[0]=u;var o={};for(var l in n)hasOwnProperty.call(n,l)&&(o[l]=n[l]);o.originalType=e,o[c]="string"==typeof e?e:r,s[1]=o;for(var d=2;d<i;d++)s[d]=t[d];return a.createElement.apply(null,s)}return a.createElement.apply(null,t)}u.displayName="MDXCreateElement"},5164:(e,n,t)=>{t.r(n),t.d(n,{contentTitle:()=>s,default:()=>c,frontMatter:()=>i,metadata:()=>o,toc:()=>l});var a=t(8168),r=(t(6540),t(5680));const i={id:"sell-nft-fixed-price",title:"Sell an NFT at a Fixed Price",sidebar_position:2},s=void 0,o={unversionedId:"guides/sell-nft-fixed-price",id:"guides/sell-nft-fixed-price",isDocsHomePage:!1,title:"Sell an NFT at a Fixed Price",description:"Get started selling an NFT using the Asks v1.1 Module",source:"@site/docs/guides/sell-an-nft.mdx",sourceDirName:"guides",slug:"/guides/sell-nft-fixed-price",permalink:"/docs/guides/sell-nft-fixed-price",editUrl:"https://github.com/digiv3rse/digi-docs/blob/main/docs/guides/sell-an-nft.mdx",version:"current",sidebarPosition:2,frontMatter:{id:"sell-nft-fixed-price",title:"Sell an NFT at a Fixed Price",sidebar_position:2}},l=[{value:"Key Benefits",id:"key-benefits",children:[]},{value:"Asks Module",id:"asks-module",children:[]},{value:"Approving Tokens to DIGI",id:"approving-tokens-to-digi",children:[]},{value:"Creating an Ask",id:"creating-an-ask",children:[]},{value:"Filling an Ask",id:"filling-an-ask",children:[]},{value:"Updating an Ask",id:"updating-an-ask",children:[]},{value:"Cancelling an Ask",id:"cancelling-an-ask",children:[]}],d={toc:l},p="wrapper";function c(e){let{components:n,...t}=e;return(0,r.yg)(p,(0,a.A)({},d,t,{components:n,mdxType:"MDXLayout"}),(0,r.yg)("h5",{id:"get-started-selling-an-nft-using-the-asks-v11-module"},"Get started selling an NFT using the Asks v1.1 Module"),(0,r.yg)("hr",null),(0,r.yg)("h3",{id:"key-benefits"},"Key Benefits"),(0,r.yg)("p",null,"DIGI allows anyone to easily sell any ERC-721 NFT at a fixed price.\nSelling an NFT via the ",(0,r.yg)("inlineCode",{parentName:"p"},"Asks Module")," comes with multiple benefits including:"),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("strong",{parentName:"li"},"Permissionless")," - No one can stop or censor sales"),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("strong",{parentName:"li"},"No Protocol Fee")," - DIGI doesn't take a cut of the final sale amount"),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("strong",{parentName:"li"},"Instant Royalty Payout")," - Royalties are paid out as soon as the sale confirms")),(0,r.yg)("hr",null),(0,r.yg)("h3",{id:"asks-module"},"Asks Module"),(0,r.yg)("p",null,"DIGI V3 is composed of a few core contracts and an ever-expanding set of modules.\nThe ",(0,r.yg)("inlineCode",{parentName:"p"},"Asks Module")," allows an ERC-721 NFT to be sold at a fixed price.\nThis guide will walk you through how to interact with the ",(0,r.yg)("inlineCode",{parentName:"p"},"Asks v1.1")," module."),(0,r.yg)("p",null,"You can read more about the latest version of the ",(0,r.yg)("inlineCode",{parentName:"p"},"Asks Module")," ",(0,r.yg)("a",{parentName:"p",href:"/docs/smart-contracts/modules/Asks/digi-v3-asks-intro"},"here"),"."),(0,r.yg)("hr",null),(0,r.yg)("h3",{id:"approving-tokens-to-digi"},"Approving Tokens to DIGI"),(0,r.yg)("div",{className:"admonition admonition-note alert alert--secondary"},(0,r.yg)("div",{parentName:"div",className:"admonition-heading"},(0,r.yg)("h5",{parentName:"div"},(0,r.yg)("span",{parentName:"h5",className:"admonition-icon"},(0,r.yg)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,r.yg)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))),"note")),(0,r.yg)("div",{parentName:"div",className:"admonition-content"},(0,r.yg)("p",{parentName:"div"},"Before getting started with the ",(0,r.yg)("inlineCode",{parentName:"p"},"Asks Module"),", we ",(0,r.yg)("strong",{parentName:"p"},"strongly")," recommend that you check out our guide on how to ",(0,r.yg)("a",{parentName:"p",href:"/docs/guides/v3-approvals"},"approve tokens to DIGI V3"),". "))),(0,r.yg)("p",null,"TLDR, DIGI V3 requires that a user approves their assets to a Transfer Helper contract as well as approve the ",(0,r.yg)("inlineCode",{parentName:"p"},"Asks v1.1 Module")," in the Module Manager contract.\nNote that token approvals to DIGI are a one-time approval per token contract per user address.\nIn addition, each module only ever needs to be approved once per user address."),(0,r.yg)("hr",null),(0,r.yg)("h3",{id:"creating-an-ask"},"Creating an Ask"),(0,r.yg)("p",null,"Once a user has approved their ERC-721 NFT to the ERC-721 Transfer Helper and approved the ",(0,r.yg)("inlineCode",{parentName:"p"},"Asks v1.1 Module")," in the Module Manager, they are ready to create an ",(0,r.yg)("inlineCode",{parentName:"p"},"ask"),".\nThe core components of an ",(0,r.yg)("inlineCode",{parentName:"p"},"ask")," are as follows:"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre"},"struct Ask {\n  address seller;\n  address sellerFundsRecipient; \n  address askCurrency;\n  uint16 findersFeeBps;\n  uint256 askPrice;\n}\n")),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("strong",{parentName:"li"},"seller:")," The owner or approved address for an NFT"),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("strong",{parentName:"li"},"sellerFundsRecipient:")," The address to send funds to once the NFT is sold"),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("strong",{parentName:"li"},"askCurrency:")," ERC-20 token to accept, or the ",(0,r.yg)("inlineCode",{parentName:"li"},"0 address")," for ETH"),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("strong",{parentName:"li"},"findersFeeBps:")," The bps of the sale amount to be sent to the referrer of the sale"),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("strong",{parentName:"li"},"askPrice:")," The sale price")),(0,r.yg)("h5",{id:"create-ask-parameters"},"Create Ask Parameters"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre"},"function createAsk(\n  address _tokenContract,\n  uint256 _tokenId,\n  uint256 _askPrice,\n  address _askCurrency,\n  address _sellerFundsRecipient,\n  uint16 _findersFeeBps\n)\n")),(0,r.yg)("h5",{id:"calling-create-ask"},"Calling Create Ask"),(0,r.yg)("p",null,"Imagine that I would like to sell a Blitmap with ",(0,r.yg)("inlineCode",{parentName:"p"},"tokenId")," 1.\nAfter approving the ERC-721 Transfer Helper to be able to move my Blitmaps and approving the ",(0,r.yg)("inlineCode",{parentName:"p"},"Asks 1.1 Module")," in the Module Manager, I am ready to create an ",(0,r.yg)("inlineCode",{parentName:"p"},"ask"),".\nIn the example below, I set the sale price to 100 ETH.\nIf I were pricing the NFT in an ERC-20, I would pass in the ERC-20 token address as the ",(0,r.yg)("inlineCode",{parentName:"p"},"askCurrency"),".\nHowever, since the sale is priced in ETH I need to set the ",(0,r.yg)("inlineCode",{parentName:"p"},"0 address"),"."),(0,r.yg)("p",null,"Lastly, I am adding an incentive by setting the Finders Fee to 2% (200 Basis Points) of the sale amount.\nMeaning whoever helps find the buyer for this NFT will receive a 2 ETH reward (100 ETH x 2%)."),(0,r.yg)("p",null,"The ABIs for all DIGI V3 contracts can be found in the ",(0,r.yg)("inlineCode",{parentName:"p"},"@digiv3rse/v3")," npm package.\nYou can use the following 2 packages to import the ABIs and typechain types (if using typescript):"),(0,r.yg)("p",null,(0,r.yg)("inlineCode",{parentName:"p"},"yarn add @digiv3rse/v3 ethers")," or ",(0,r.yg)("inlineCode",{parentName:"p"},"npm install @digiv3rse/v3 ethers")),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-javascript"},'import { ethers } from "ethers";\nimport mainnetDiGiAddresses from "@digiv3rse/v3/dist/addresses/1.json"; // Mainnet addresses\nimport { AsksV11__factory } from "@digiv3rse/v3/dist/typechain/factories/AsksV11__factory";\n\n// This should be an ethers.js signer instance: \n// You can get the signer from a wallet using web3modal/rainbowkit/blocknative wallet etc.\n// See: https://docs.ethers.io/v5/api/signer/\nconst provider = new ethers.providers.Web3Provider(web3.currentProvider, 1);\nconst signer = await provider.getSigner();\n\n// Initialize Asks v1.1 Module Contract\nconst askModuleContract = AsksV11__factory.connect(mainnetDiGiAddresses.AsksV1_1, signer);\n\nconst blitmapAddress = "0x8d04a8c79cEB0889Bdd12acdF3Fa9D207eD3Ff63"; // Blitmap NFT Contract\nconst askPrice = ethers.utils.parseEther("100") // 100 ETH Sale Price\nconst ownerAddress = "0xF296178d553C8Ec21A2fBD2c5dDa8CA9ac905A00"; // Owner of the assets\nconst findersFeeBps = "200"; // 2% Finders Fee (in BPS)\n\n// Calling Create Ask\n// Notice: Since this interaction submits a transaction to the blockchain it requires a signer.\n// A signer interfaces with a wallet. You can use walletconnect or injected web3.\nawait askModuleContract.createAsk(\n  blitmapAddress,\n  "1", // Token Id\n  askPrice,\n  "0x0000000000000000000000000000000000000000", // 0 address for ETH sale\n  ownerAddress,\n  findersFeeBps\n);\n')),(0,r.yg)("h5",{id:"different-networks"},"Different Networks"),(0,r.yg)("p",null,"Note these examples use ",(0,r.yg)("inlineCode",{parentName:"p"},"Mainnet"),", but if you would like to test on ",(0,r.yg)("inlineCode",{parentName:"p"},"Geroli")," then you can update the ",(0,r.yg)("inlineCode",{parentName:"p"},"networkId")," in the import to be ",(0,r.yg)("inlineCode",{parentName:"p"},"5.json")," to get the ",(0,r.yg)("inlineCode",{parentName:"p"},"Geroli")," addresses."),(0,r.yg)("p",null,(0,r.yg)("inlineCode",{parentName:"p"},"@digiv3rse/v3/dist/addresses/1.json")," change to ",(0,r.yg)("inlineCode",{parentName:"p"},"@digiv3rse/v3/dist/addresses/5.json")," "),(0,r.yg)("p",null,"You can also get ",(0,r.yg)("inlineCode",{parentName:"p"},"Geroli")," ETH at the faucet ",(0,r.yg)("a",{parentName:"p",href:"https://faucet.paradigm.xyz/"},"here")," or ",(0,r.yg)("a",{parentName:"p",href:"https://goerlifaucet.com/"},"here"),"."),(0,r.yg)("h5",{id:"setting-the-finders-fee"},"Setting the Finders Fee"),(0,r.yg)("p",null,"The Finders Fee is an optional amount that can be included when an ",(0,r.yg)("inlineCode",{parentName:"p"},"ask")," is created.\nThis amount can be awarded to the party that helped matched the buyer to the NFT.\nThe Finders Fee is set in basis points, so if you wanted 2% of the sale amount to go to the finder then you would set ",(0,r.yg)("inlineCode",{parentName:"p"},"findersFeeBps")," to 200 (2 x 100 = 200)."),(0,r.yg)("hr",null),(0,r.yg)("h3",{id:"filling-an-ask"},"Filling an Ask"),(0,r.yg)("p",null,"Once an ",(0,r.yg)("inlineCode",{parentName:"p"},"ask")," has been created it can be filled by anyone.\nIf the NFT is priced in an ERC-20 token then the user trying to fill the ",(0,r.yg)("inlineCode",{parentName:"p"},"ask")," must approve their tokens to the ",(0,r.yg)("a",{parentName:"p",href:"/docs/guides/v3-approvals#approving-a-transfer-helper"},"ERC-20 Transfer Helper"),"\nand then approve the ",(0,r.yg)("inlineCode",{parentName:"p"},"Asks 1.1 Module")," in the Module Manager."),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre"},"function fillAsk(\n    address _tokenContract,\n    uint256 _tokenId,\n    address _fillCurrency,\n    uint256 _fillAmount,\n    address _finder\n) \n")),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-javascript"},'const blitmapAddress = "0x8d04a8c79cEB0889Bdd12acdF3Fa9D207eD3Ff63"; // Blitmap NFT Contract\nconst fillAmount = ethers.utils.parseEther("100"); // 100 ETH Sale Price\nconst finder = "0x17cd072cBd45031EFc21Da538c783E0ed3b25DCc"; // Address that helped find the buyer. Can be the 0 address if no address is specified\n\n\n// *Note: Since the ask is priced in ETH the transaction must also send the same amount of ETH in the transaction. This can be done by specifying the value as an override in the transaction.\nconst overrides = {\n  value: fillAmount\n}\nawait askModuleContract.fillAsk(\n  blitmapAddress,\n  "1", // Token Id\n  "0x0000000000000000000000000000000000000000", // 0 address for ETH sale\n  fillAmount,\n  finder,\n  overrides // Only for asks priced in ETH\n);\n')),(0,r.yg)("h5",{id:"the-finder-address"},"The Finder Address"),(0,r.yg)("p",null,"The ",(0,r.yg)("inlineCode",{parentName:"p"},"finder")," is an address of the party that helped matched the buyer to the NFT and is awarded the Finders Fee.\nThe ",(0,r.yg)("inlineCode",{parentName:"p"},"finder")," address can be set to the ",(0,r.yg)("inlineCode",{parentName:"p"},"0 address")," if no address is provided or no Finder's Fee is set.\nThis will skip over the Finder's Fee logic in the contract and will send the total sale amount to the seller's address."),(0,r.yg)("hr",null),(0,r.yg)("h3",{id:"updating-an-ask"},"Updating an Ask"),(0,r.yg)("p",null,"An ",(0,r.yg)("inlineCode",{parentName:"p"},"ask")," can be updated at anytime, but it can only be updated by the owner of the NFT."),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre"},"function setAskPrice(\n  address _tokenContract,\n  uint256 _tokenId,\n  uint256 _askPrice,\n  address _askCurrency\n) \n")),(0,r.yg)("p",null,"In the example below I am updating the price from 100 ETH to 110 ETH."),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-javascript"},'const blitmapAddress = "0x8d04a8c79cEB0889Bdd12acdF3Fa9D207eD3Ff63"; // Blitmap NFT Contract\nconst askPrice = ethers.utils.parseEther("110"); // 110 ETH Sale Price\nconst overrides = { value: askPrice } // Need to pass in an override in the function call since you are sending Ether in the tx\n\nawait askModuleContract.setAskPrice(\n  blitmapAddress,\n  "1", // Token Id\n  askPrice,\n  "0x0000000000000000000000000000000000000000", // 0 address for ETH sale\n  overrides\n);\n')),(0,r.yg)("hr",null),(0,r.yg)("h3",{id:"cancelling-an-ask"},"Cancelling an Ask"),(0,r.yg)("p",null,"An ",(0,r.yg)("inlineCode",{parentName:"p"},"ask")," can be canceled by either the token owner or an approved operator.\nNote that transferring an NFT from the address that originally created the ",(0,r.yg)("inlineCode",{parentName:"p"},"ask")," will temporarily invalidate the ",(0,r.yg)("inlineCode",{parentName:"p"},"ask"),".\nHowever, if the NFT is ever transferred back to the original address then the ",(0,r.yg)("inlineCode",{parentName:"p"},"ask")," will become valid again.\nIt is always best to directly cancel an ",(0,r.yg)("inlineCode",{parentName:"p"},"ask")," rather than transfer the NFT to a different address."),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre"},"function cancelAsk(address _tokenContract, uint256 _tokenId)\n")),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-javascript"},'const blitmapAddress = "0x8d04a8c79cEB0889Bdd12acdF3Fa9D207eD3Ff63"; // Blitmap NFT Contract\n\nawait askModuleContract.cancelAsk(\n  blitmapAddress,\n  "1", // Token Id\n);\n')))}c.isMDXComponent=!0}}]);