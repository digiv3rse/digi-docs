<!doctype html>
<html lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.4">
<link rel="search" type="application/opensearchdescription+xml" title="DiGi Docs" href="/build/index.html/opensearch.xml">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.11/dist/katex.min.css" integrity="sha384-Um5gpz1odJg5Z4HAmzPtgZKdTBHZdw8S29IecapCSB31ligYPhHQZMIlWLYQGVoc" crossorigin="anonymous"><title data-react-helmet="true">Approve Tokens to DiGi | DiGi Docs</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="https://docs.digiv3rse.xyz/build/index.html/docs/guides/v3-approvals"><meta data-react-helmet="true" name="docsearch:language" content="en"><meta data-react-helmet="true" name="docsearch:version" content="current"><meta data-react-helmet="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" name="title" content="DiGi Docs"><meta data-react-helmet="true" name="og:description" content="Bringing imagination onchain."><meta data-react-helmet="true" property="og:title" content="Approve Tokens to DiGi | DiGi Docs"><meta data-react-helmet="true" name="description" content="Learn the first steps to getting started building with DIGI"><meta data-react-helmet="true" property="og:description" content="Learn the first steps to getting started building with DIGI"><meta data-react-helmet="true" property="og:image" content="https://docs.digiv3rse.xyz/build/index.html/img/og-image.png"><meta data-react-helmet="true" name="twitter:image" content="https://docs.digiv3rse.xyz/build/index.html/img/og-image.png"><link data-react-helmet="true" rel="shortcut icon" href="/build/index.html/img/logo.png"><link data-react-helmet="true" rel="canonical" href="https://docs.digiv3rse.xyz/build/index.html/docs/guides/v3-approvals"><link data-react-helmet="true" rel="alternate" href="https://docs.digiv3rse.xyz/build/index.html/docs/guides/v3-approvals" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://docs.digiv3rse.xyz/build/index.html/docs/guides/v3-approvals" hreflang="x-default"><link data-react-helmet="true" rel="preconnect" href="https://MXTIYN84GN-dsn.algolia.net" crossorigin="anonymous"><link rel="stylesheet" href="/build/index.html/assets/css/styles.769c295f.css">
<link rel="preload" href="/build/index.html/assets/js/runtime~main.5f8fb016.js" as="script">
<link rel="preload" href="/build/index.html/assets/js/main.215a8fc0.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"dark")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_OuoZ">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="40" height="40" viewBox="0 0 40 40" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill="#F2F2F2" d="M10 12h20v3H10zM10 19h20v3H10zM10 26h20v3H10z"></path></svg></button><a class="navbar__brand" href="/build/index.html/"><img src="/build/index.html/img/logo.png" alt="DiGi Docs Logo" class="themedImage_TMUO themedImage--light_4Vu1 navbar__logo"><img src="/build/index.html/img/logo.png" alt="DiGi Docs Logo" class="themedImage_TMUO themedImage--dark_uzRr navbar__logo"></a><a class="navbar__item navbar__link navbar__item__style_qcjC" href="/build/index.html/docs/intro">Intro</a><a class="navbar__item navbar__link navbar__item__style_qcjC" href="/build/index.html/docs/smart-contracts/creator-tools/intro">Contracts</a><a class="navbar__item navbar__link navbar__item__style_qcjC" href="/build/index.html/docs/digi-network/intro">DiGi Network</a><a class="navbar__item navbar__link navbar__item__style_qcjC" href="/build/index.html/docs/digi-api/intro">API</a><div class="searchBox_fBfG"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search..."><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20" aria-hidden="true"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search...</span></span><span class="DocSearch-Button-Keys"></span></button></div></div><div class="navbar__items navbar__items--right"><a href="https://github.com/digiv3rse" target="_blank" rel="noopener noreferrer"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="githubIcon_icy1"><path fill-rule="evenodd" clip-rule="evenodd" d="M12 .3C5.4.3 0 5.7 0 12.3c0 5.3 3.4 9.8 8.2 11.4.6.1.8-.3.8-.6v-2c-3.3.7-4-1.6-4-1.6-.5-1.4-1.3-1.8-1.3-1.8-1.2-.7 0-.7 0-.7 1.2.1 1.8 1.2 1.8 1.2 1.1 1.8 2.8 1.3 3.5 1 .1-.8.4-1.3.8-1.6-2.7-.3-5.5-1.3-5.5-5.9 0-1.3.5-2.4 1.2-3.2 0-.4-.5-1.6.2-3.2 0 0 1-.3 3.3 1.2 1-.3 2-.4 3-.4s2 .1 3 .4c2.3-1.6 3.3-1.2 3.3-1.2.7 1.7.2 2.9.1 3.2.8.8 1.2 1.9 1.2 3.2 0 4.6-2.8 5.6-5.5 5.9.4.4.8 1.1.8 2.2v3.3c0 .3.2.7.8.6 4.8-1.6 8.2-6.1 8.2-11.4C24 5.7 18.6.3 12 .3z" fill="#F2F2F2"></path></svg></a><a href="https://digiv3rse.xyz/" target="_blank" rel="noopener noreferrer"><button class="digiCoButton_gewf">DiGi.co</button></a></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper doc-page"><div class="docPage_lDyR"><button class="clean-btn backToTopButton_i9tI" type="button" title="Scroll to top"><svg viewBox="0 0 24 24" width="28"><path d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z" fill="currentColor"></path></svg></button><main class="docMainContainer_r8cw docMainContainerEnhanced_SOUu"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_zHA2"><div class="docItemContainer_oiyr"><article><div class="tocCollapsible_aw-L tocMobile_Tx6Y"><button type="button" class="clean-btn tocCollapsibleButton_zr6a">On this page</button></div><div class="markdown"><header><h1 class="h1Heading_dC7a">Approve Tokens to DiGi</h1></header><h5><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_WiXH" id="learn-the-first-steps-to-getting-started-building-with-digi"></a>Learn the first steps to getting started building with DIGI<a class="hash-link" href="#learn-the-first-steps-to-getting-started-building-with-digi" title="Direct link to heading">#</a></h5><hr><p>DIGI V3 provides different types of market functionality that allows anyone to get started building with NFTs.
However, before being able to interact with specific functionality certain approvals must be granted to DIGI.</p><p><img alt="digiv3diagram" src="/build/index.html/assets/images/digi_v3_diagram-944a6c24495690a49682540a84527d55.png"></p><p>V3 consists of a few core contracts and an ever-expanding set of modules.
Modules are non-upgradable contracts that provide specific functionality.
The DIGI core contracts include <strong>Token Transfer Helpers</strong> and the <strong>Module Manager</strong>.</p><ul><li><strong>Transfer Helper:</strong> Handles transferring ERC-20 and ERC-721 tokens for the modules</li><li><strong>Module Manager:</strong> Manages which modules a user has approved to use their tokens</li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_WiXH" id="required-approvals"></a>Required Approvals<a class="hash-link" href="#required-approvals" title="Direct link to heading">#</a></h3><p>Before interacting with specific modules, there are a few approval steps that are required.
First, any assets that are going to be moved by DIGI must have their respective Transfer Helper approved to the token contract.
For example, if you would like to sell an NFT, the ERC-721 Transfer Helper address must be approved to the NFT contract as an operator.
Second, once the assets have been approved to the Transfer Helpers, the necessary modules must be approved in the Module Manager by the user.</p><h5><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_WiXH" id="approval-steps"></a>Approval Steps<a class="hash-link" href="#approval-steps" title="Direct link to heading">#</a></h5><ol><li>Approve Tokens to the Transfer Helpers</li><li>Approve Modules in the Module Manager</li></ol><hr><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_WiXH" id="initial-code-setup"></a>Initial Code Setup<a class="hash-link" href="#initial-code-setup" title="Direct link to heading">#</a></h3><p>The following code examples will walk you through how to approve both Transfer Helpers and the Module Manager.
This first section will show you how to get set up to interact with the DIGI contracts using the <code>ethers</code> js library.</p><p>The ABIs for all DIGI V3 contracts can be found in the <code>@digiv3rse/v3</code> npm package.
You can use the following 2 packages to import the ABIs and typechain types (if using typescript):</p><p><code>yarn add @digiv3rse/v3 ethers</code> or <code>npm install @digiv3rse/v3 ethers</code></p><div class="codeBlockContainer_EiTO"><div class="codeBlockContent_X2I6 javascript"><pre tabindex="0" class="prism-code language-javascript codeBlock_UxnK thin-scrollbar" style="color:#F2F2F2;background-color:#1F1F1F4D"><code class="codeBlockLines_W6UD"><span class="token-line" style="color:#F2F2F2"><span class="token keyword module" style="color:#5188f5">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:#999999">{</span><span class="token imports"> ethers </span><span class="token imports punctuation" style="color:#999999">}</span><span class="token plain"> </span><span class="token keyword module" style="color:#5188f5">from</span><span class="token plain"> </span><span class="token string" style="color:#88e7e7">&quot;ethers&quot;</span><span class="token punctuation" style="color:#999999">;</span><span class="token plain"></span></span><span class="token-line" style="color:#F2F2F2"><span class="token plain"></span><span class="token keyword module" style="color:#5188f5">import</span><span class="token plain"> </span><span class="token imports">mainnetDiGiAddresses</span><span class="token plain"> </span><span class="token keyword module" style="color:#5188f5">from</span><span class="token plain"> </span><span class="token string" style="color:#88e7e7">&quot;@digiv3rse/v3/dist/addresses/1.json&quot;</span><span class="token punctuation" style="color:#999999">;</span><span class="token plain"> </span><span class="token comment" style="color:#666666;font-style:italic">// Mainnet addresses, 5.json would be Goerli Testnet </span><span class="token plain"></span></span><span class="token-line" style="color:#F2F2F2"><span class="token plain"></span><span class="token keyword module" style="color:#5188f5">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:#999999">{</span><span class="token imports"> </span><span class="token imports maybe-class-name">IERC721__factory</span><span class="token imports"> </span><span class="token imports punctuation" style="color:#999999">}</span><span class="token plain"> </span><span class="token keyword module" style="color:#5188f5">from</span><span class="token plain"> </span><span class="token string" style="color:#88e7e7">&quot;@digiv3rse/v3/dist/typechain/factories/IERC721__factory&quot;</span><span class="token punctuation" style="color:#999999">;</span><span class="token plain"></span></span><span class="token-line" style="color:#F2F2F2"><span class="token plain"></span><span class="token keyword module" style="color:#5188f5">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:#999999">{</span><span class="token imports"> </span><span class="token imports maybe-class-name">IERC20__factory</span><span class="token imports"> </span><span class="token imports punctuation" style="color:#999999">}</span><span class="token plain"> </span><span class="token keyword module" style="color:#5188f5">from</span><span class="token plain"> </span><span class="token string" style="color:#88e7e7">&quot;@digiv3rse/v3/dist/typechain/factories/IERC20__factory&quot;</span><span class="token punctuation" style="color:#999999">;</span><span class="token plain"></span></span><span class="token-line" style="color:#F2F2F2"><span class="token plain"></span><span class="token keyword module" style="color:#5188f5">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:#999999">{</span><span class="token imports"> </span><span class="token imports maybe-class-name">DiGiModuleManager__factory</span><span class="token imports"> </span><span class="token imports punctuation" style="color:#999999">}</span><span class="token plain"> </span><span class="token keyword module" style="color:#5188f5">from</span><span class="token plain"> </span><span class="token string" style="color:#88e7e7">&quot;@digiv3rse/v3/dist/typechain/factories/DiGiModuleManager__factory&quot;</span><span class="token punctuation" style="color:#999999">;</span><span class="token plain"></span></span><span class="token-line" style="color:#F2F2F2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#F2F2F2"><span class="token plain"></span><span class="token comment" style="color:#666666;font-style:italic">// This should be an ethers.js signer instance: </span><span class="token plain"></span></span><span class="token-line" style="color:#F2F2F2"><span class="token plain"></span><span class="token comment" style="color:#666666;font-style:italic">// You can get the signer from a wallet using web3modal/rainbowkit/blocknative wallet etc.</span><span class="token plain"></span></span><span class="token-line" style="color:#F2F2F2"><span class="token plain"></span><span class="token comment" style="color:#666666;font-style:italic">// See: https://docs.ethers.io/v5/api/signer/</span><span class="token plain"></span></span><span class="token-line" style="color:#F2F2F2"><span class="token plain"></span><span class="token keyword" style="color:#5188f5">const</span><span class="token plain"> provider </span><span class="token operator" style="color:#999999">=</span><span class="token plain"> </span><span class="token keyword" style="color:#5188f5">new</span><span class="token plain"> </span><span class="token class-name" style="color:#e7b16e">ethers</span><span class="token class-name punctuation" style="color:#999999">.</span><span class="token class-name" style="color:#e7b16e">providers</span><span class="token class-name punctuation" style="color:#999999">.</span><span class="token class-name" style="color:#e7b16e">Web3Provider</span><span class="token punctuation" style="color:#999999">(</span><span class="token plain">web3</span><span class="token punctuation" style="color:#999999">.</span><span class="token property-access">currentProvider</span><span class="token punctuation" style="color:#999999">,</span><span class="token plain"> </span><span class="token number" style="color:#e7b16e">1</span><span class="token punctuation" style="color:#999999">)</span><span class="token punctuation" style="color:#999999">;</span><span class="token plain"></span></span><span class="token-line" style="color:#F2F2F2"><span class="token plain"></span><span class="token keyword" style="color:#5188f5">const</span><span class="token plain"> signer </span><span class="token operator" style="color:#999999">=</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#5188f5">await</span><span class="token plain"> provider</span><span class="token punctuation" style="color:#999999">.</span><span class="token method function property-access" style="color:#86d7ff">getSigner</span><span class="token punctuation" style="color:#999999">(</span><span class="token punctuation" style="color:#999999">)</span><span class="token punctuation" style="color:#999999">;</span><span class="token plain"></span></span><span class="token-line" style="color:#F2F2F2"><span class="token plain"></span><span class="token keyword" style="color:#5188f5">const</span><span class="token plain"> moduleManagerAddress </span><span class="token operator" style="color:#999999">=</span><span class="token plain"> mainnetDiGiAddresses</span><span class="token punctuation" style="color:#999999">.</span><span class="token property-access maybe-class-name">DiGiModuleManager</span><span class="token punctuation" style="color:#999999">;</span><span class="token plain"></span></span><span class="token-line" style="color:#F2F2F2"><span class="token plain"></span><span class="token keyword" style="color:#5188f5">const</span><span class="token plain"> ownerAddress </span><span class="token operator" style="color:#999999">=</span><span class="token plain"> </span><span class="token string" style="color:#88e7e7">&quot;0xF296178d553C8Ec21A2fBD2c5dDa8CA9ac905A00&quot;</span><span class="token punctuation" style="color:#999999">;</span><span class="token plain"> </span><span class="token comment" style="color:#666666;font-style:italic">// Owner of the assets</span><span class="token plain"></span></span><span class="token-line" style="color:#F2F2F2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#F2F2F2"><span class="token plain"></span><span class="token comment" style="color:#666666;font-style:italic">// Initialize NFT demo contract</span><span class="token plain"></span></span><span class="token-line" style="color:#F2F2F2"><span class="token plain"></span><span class="token keyword" style="color:#5188f5">const</span><span class="token plain"> nftContractAddress </span><span class="token operator" style="color:#999999">=</span><span class="token plain"> </span><span class="token string" style="color:#88e7e7">&quot;0x8d04a8c79cEB0889Bdd12acdF3Fa9D207eD3Ff63&quot;</span><span class="token punctuation" style="color:#999999">;</span><span class="token plain"> </span><span class="token comment" style="color:#666666;font-style:italic">// Blitmap NFT Contract</span><span class="token plain"></span></span><span class="token-line" style="color:#F2F2F2"><span class="token plain"></span><span class="token keyword" style="color:#5188f5">const</span><span class="token plain"> erc721Contract </span><span class="token operator" style="color:#999999">=</span><span class="token plain"> </span><span class="token maybe-class-name">IERC721__factory</span><span class="token punctuation" style="color:#999999">.</span><span class="token method function property-access" style="color:#86d7ff">connect</span><span class="token punctuation" style="color:#999999">(</span><span class="token plain">nftContractAddress</span><span class="token punctuation" style="color:#999999">,</span><span class="token plain"> signer</span><span class="token punctuation" style="color:#999999">)</span><span class="token punctuation" style="color:#999999">;</span><span class="token plain"></span></span><span class="token-line" style="color:#F2F2F2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#F2F2F2"><span class="token plain"></span><span class="token comment" style="color:#666666;font-style:italic">// Initialize ERC20 currency demo contract</span><span class="token plain"></span></span><span class="token-line" style="color:#F2F2F2"><span class="token plain"></span><span class="token keyword" style="color:#5188f5">const</span><span class="token plain"> erc20ContractAddress </span><span class="token operator" style="color:#999999">=</span><span class="token plain"> </span><span class="token string" style="color:#88e7e7">&quot;0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48&quot;</span><span class="token punctuation" style="color:#999999">;</span><span class="token plain"> </span><span class="token comment" style="color:#666666;font-style:italic">// USDC token address</span><span class="token plain"></span></span><span class="token-line" style="color:#F2F2F2"><span class="token plain"></span><span class="token keyword" style="color:#5188f5">const</span><span class="token plain"> erc20Contract </span><span class="token operator" style="color:#999999">=</span><span class="token plain"> </span><span class="token maybe-class-name">IERC20__factory</span><span class="token punctuation" style="color:#999999">.</span><span class="token method function property-access" style="color:#86d7ff">connect</span><span class="token punctuation" style="color:#999999">(</span><span class="token plain">erc20ContractAddress</span><span class="token punctuation" style="color:#999999">,</span><span class="token plain"> signer</span><span class="token punctuation" style="color:#999999">)</span><span class="token punctuation" style="color:#999999">;</span><span class="token plain"></span></span><span class="token-line" style="color:#F2F2F2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#F2F2F2"><span class="token plain"></span><span class="token comment" style="color:#666666;font-style:italic">// Initialize DiGi V3 Module Manager contract </span><span class="token plain"></span></span><span class="token-line" style="color:#F2F2F2"><span class="token plain"></span><span class="token keyword" style="color:#5188f5">const</span><span class="token plain"> moduleManagerContract </span><span class="token operator" style="color:#999999">=</span><span class="token plain"> </span><span class="token maybe-class-name">DiGiModuleManager__factory</span><span class="token punctuation" style="color:#999999">.</span><span class="token method function property-access" style="color:#86d7ff">connect</span><span class="token punctuation" style="color:#999999">(</span><span class="token plain">mainnetDiGiAddresses</span><span class="token punctuation" style="color:#999999">.</span><span class="token property-access maybe-class-name">DiGiModuleManager</span><span class="token punctuation" style="color:#999999">,</span><span class="token plain"> signer</span><span class="token punctuation" style="color:#999999">)</span><span class="token punctuation" style="color:#999999">;</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_V-PD clean-btn">Copy</button></div></div><h5><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_WiXH" id="different-networks"></a>Different Networks<a class="hash-link" href="#different-networks" title="Direct link to heading">#</a></h5><p>Note these examples use <code>Mainnet</code>, but if you would like to test on <code>Goerli</code> then you can update the <code>networkId</code> in the import to be <code>5</code> to get the <code>Goerli</code> addresses.</p><p><code>@digiv3rse/v3/dist/addresses/1.json</code> change to <code>@digiv3rse/v3/dist/addresses/5.json</code> </p><p>You can also get <code>Goerli</code> ETH at the faucet <a href="https://faucet.paradigm.xyz/" target="_blank" rel="noopener noreferrer">here</a>, <a href="https://goerlifaucet.com/" target="_blank" rel="noopener noreferrer">here</a> or <a href="https://faucet.chainstack.com/goerli-faucet" target="_blank" rel="noopener noreferrer">here</a>.</p><hr><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_WiXH" id="approving-a-transfer-helper"></a>Approving a Transfer Helper<a class="hash-link" href="#approving-a-transfer-helper" title="Direct link to heading">#</a></h3><p>Tokens must first be approved to the correct Transfer Helper before being able to be used by DIGI V3.
A token approval to the DIGI Transfer Helpers will <strong>only ever need to be done once per token contract per user address</strong>.
Once a token is approved to the Transfer Helper it can then be used by any approved V3 module.
In addition, each module only ever needs to be approved once per user address.</p><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</h5></div><div class="admonition-content"><p>If a user is trying to make a purchase with <strong>just ETH</strong> then they don&#x27;t need to approve Transfer Helpers or DIGI modules.</p></div></div><h5><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_WiXH" id="erc-721-tokens"></a>ERC-721 Tokens<a class="hash-link" href="#erc-721-tokens" title="Direct link to heading">#</a></h5><p>DIGI V3 requires that the ERC-721 Transfer Helper has been approved as an operator to be able to move the NFT.
First, check if the ERC-721 Transfer Helper can access the NFTs for the user&#x27;s address.
Then submit a transaction calling the <code>setApprovalForAll</code> to approve all NFTs if not already approved.</p><div class="codeBlockContainer_EiTO"><div class="codeBlockContent_X2I6"><pre tabindex="0" class="prism-code language-undefined codeBlock_UxnK thin-scrollbar" style="color:#F2F2F2;background-color:#1F1F1F4D"><code class="codeBlockLines_W6UD"><span class="token-line" style="color:#F2F2F2"><span class="token plain">// Read Function</span></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">function isApprovedForAll(address _owner, address _operator) </span></span><span class="token-line" style="color:#F2F2F2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">// Write Function</span></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">function setApprovalForAll(address _operator, bool _approved)</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_V-PD clean-btn">Copy</button></div></div><div class="codeBlockContainer_EiTO"><div class="codeBlockContent_X2I6 javascript"><pre tabindex="0" class="prism-code language-javascript codeBlock_UxnK thin-scrollbar" style="color:#F2F2F2;background-color:#1F1F1F4D"><code class="codeBlockLines_W6UD"><span class="token-line" style="color:#F2F2F2"><span class="token keyword" style="color:#5188f5">const</span><span class="token plain"> erc721TransferHelperAddress </span><span class="token operator" style="color:#999999">=</span><span class="token plain"> mainnetDiGiAddresses</span><span class="token punctuation" style="color:#999999">.</span><span class="token property-access maybe-class-name">ERC721TransferHelper</span><span class="token punctuation" style="color:#999999">;</span><span class="token plain"></span></span><span class="token-line" style="color:#F2F2F2"><span class="token plain"></span><span class="token keyword" style="color:#5188f5">const</span><span class="token plain"> approved </span><span class="token operator" style="color:#999999">=</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#5188f5">await</span><span class="token plain"> erc721Contract</span><span class="token punctuation" style="color:#999999">.</span><span class="token method function property-access" style="color:#86d7ff">isApprovedForAll</span><span class="token punctuation" style="color:#999999">(</span><span class="token plain"></span></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">  ownerAddress</span><span class="token punctuation" style="color:#999999">,</span><span class="token plain"> </span><span class="token comment" style="color:#666666;font-style:italic">// NFT owner address</span><span class="token plain"></span></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">  erc721TransferHelperAddress </span><span class="token comment" style="color:#666666;font-style:italic">// V3 Module Transfer Helper to approve</span><span class="token plain"></span></span><span class="token-line" style="color:#F2F2F2"><span class="token plain"></span><span class="token punctuation" style="color:#999999">)</span><span class="token punctuation" style="color:#999999">;</span><span class="token plain"></span></span><span class="token-line" style="color:#F2F2F2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#F2F2F2"><span class="token plain"></span><span class="token comment" style="color:#666666;font-style:italic">// If the approval is not already granted, add it.</span><span class="token plain"></span></span><span class="token-line" style="color:#F2F2F2"><span class="token plain"></span><span class="token keyword control-flow" style="color:#5188f5">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#999999">(</span><span class="token plain">approved </span><span class="token operator" style="color:#999999">===</span><span class="token plain"> </span><span class="token boolean" style="color:#e7b16e">false</span><span class="token punctuation" style="color:#999999">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#999999">{</span><span class="token plain"></span></span><span class="token-line" style="color:#F2F2F2"><span class="token plain"></span><span class="token comment" style="color:#666666;font-style:italic">// Notice: Since this interaction submits a transaction to the blockchain it requires an ethers signer.</span><span class="token plain"></span></span><span class="token-line" style="color:#F2F2F2"><span class="token plain"></span><span class="token comment" style="color:#666666;font-style:italic">// A signer interfaces with a wallet. You can use walletconnect or injected web3.</span><span class="token plain"></span></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#5188f5">await</span><span class="token plain"> erc721Contract</span><span class="token punctuation" style="color:#999999">.</span><span class="token method function property-access" style="color:#86d7ff">setApprovalForAll</span><span class="token punctuation" style="color:#999999">(</span><span class="token plain">erc721TransferHelperAddress</span><span class="token punctuation" style="color:#999999">,</span><span class="token plain"> </span><span class="token boolean" style="color:#e7b16e">true</span><span class="token punctuation" style="color:#999999">)</span><span class="token punctuation" style="color:#999999">;</span><span class="token plain"></span></span><span class="token-line" style="color:#F2F2F2"><span class="token plain"></span><span class="token punctuation" style="color:#999999">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_V-PD clean-btn">Copy</button></div></div><h5><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_WiXH" id="erc-20"></a>ERC-20<a class="hash-link" href="#erc-20" title="Direct link to heading">#</a></h5><p>If an NFT is priced in an ERC-20 token then the user will first need to approve their tokens to the ERC-20 Transfer Helper.
You can check the user&#x27;s allowance to the DIGI Transfer Helper by calling the <code>allowance</code> function and then set the approved amount by calling the <code>approve</code> function.
Note that DIGI is compatible with any ERC-20.</p><div class="codeBlockContainer_EiTO"><div class="codeBlockContent_X2I6"><pre tabindex="0" class="prism-code language-undefined codeBlock_UxnK thin-scrollbar" style="color:#F2F2F2;background-color:#1F1F1F4D"><code class="codeBlockLines_W6UD"><span class="token-line" style="color:#F2F2F2"><span class="token plain">// Read Function</span></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">function allowance(address _owner, address _spender) </span></span><span class="token-line" style="color:#F2F2F2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">// Write Function</span></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">function approve(address _spender, uint256 _amount)</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_V-PD clean-btn">Copy</button></div></div><div class="codeBlockContainer_EiTO"><div class="codeBlockContent_X2I6 javascript"><pre tabindex="0" class="prism-code language-javascript codeBlock_UxnK thin-scrollbar" style="color:#F2F2F2;background-color:#1F1F1F4D"><code class="codeBlockLines_W6UD"><span class="token-line" style="color:#F2F2F2"><span class="token keyword" style="color:#5188f5">const</span><span class="token plain"> erc20TransferHelperAddress </span><span class="token operator" style="color:#999999">=</span><span class="token plain"> mainnetDiGiAddresses</span><span class="token punctuation" style="color:#999999">.</span><span class="token property-access maybe-class-name">ERC20TransferHelper</span><span class="token punctuation" style="color:#999999">;</span><span class="token plain"></span></span><span class="token-line" style="color:#F2F2F2"><span class="token plain"></span><span class="token keyword" style="color:#5188f5">const</span><span class="token plain"> approvedAmount </span><span class="token operator" style="color:#999999">=</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#5188f5">await</span><span class="token plain"> erc20Contract</span><span class="token punctuation" style="color:#999999">.</span><span class="token method function property-access" style="color:#86d7ff">allowance</span><span class="token punctuation" style="color:#999999">(</span><span class="token plain">ownerAddress</span><span class="token punctuation" style="color:#999999">,</span><span class="token plain"> erc20TransferHelperAddress</span><span class="token punctuation" style="color:#999999">)</span><span class="token punctuation" style="color:#999999">;</span><span class="token plain"></span></span><span class="token-line" style="color:#F2F2F2"><span class="token plain"></span><span class="token keyword" style="color:#5188f5">const</span><span class="token plain"> infiniteApprovalAmount </span><span class="token operator" style="color:#999999">=</span><span class="token plain"> ethers</span><span class="token punctuation" style="color:#999999">.</span><span class="token property-access">constants</span><span class="token punctuation" style="color:#999999">.</span><span class="token property-access maybe-class-name">MaxUint256</span><span class="token punctuation" style="color:#999999">;</span><span class="token plain"> </span><span class="token comment" style="color:#666666;font-style:italic">// Inifite approval is used here but any amount can be specified</span><span class="token plain"></span></span><span class="token-line" style="color:#F2F2F2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#F2F2F2"><span class="token plain"></span><span class="token keyword control-flow" style="color:#5188f5">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#999999">(</span><span class="token plain">approvedAmount </span><span class="token operator" style="color:#999999">===</span><span class="token plain"> </span><span class="token string" style="color:#88e7e7">&quot;0&quot;</span><span class="token punctuation" style="color:#999999">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#999999">{</span><span class="token plain"></span></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#5188f5">await</span><span class="token plain"> erc20Contract</span><span class="token punctuation" style="color:#999999">.</span><span class="token method function property-access" style="color:#86d7ff">approve</span><span class="token punctuation" style="color:#999999">(</span><span class="token plain">ownerAddress</span><span class="token punctuation" style="color:#999999">,</span><span class="token plain"> erc20TransferHelperAddress</span><span class="token punctuation" style="color:#999999">,</span><span class="token plain"> infiniteApprovalAmount</span><span class="token punctuation" style="color:#999999">)</span><span class="token punctuation" style="color:#999999">;</span><span class="token plain"></span></span><span class="token-line" style="color:#F2F2F2"><span class="token plain"></span><span class="token punctuation" style="color:#999999">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_V-PD clean-btn">Copy</button></div></div><hr><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_WiXH" id="approving-modules-in-the-module-manager"></a>Approving Modules in the Module Manager<a class="hash-link" href="#approving-modules-in-the-module-manager" title="Direct link to heading">#</a></h3><p>Once all the necessary tokens have been approved to the correct Transfer Helpers,
the user will then need to submit a transaction to allow specific DIGI modules to have access to their assets.
For example, if a user would like to sell an NFT via the <code>Asks v1.1 Module</code> they will need to approve that module in the Module Manager for the <code>Asks 1.1 Module</code> to be able to transfer the NFT in the event of a sale.</p><h5><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_WiXH" id="single-module"></a>Single Module<a class="hash-link" href="#single-module" title="Direct link to heading">#</a></h5><p>A user can approve a single module by calling <code>setApprovalForModule</code> with the address of the module they would like to approve and a boolean.</p><div class="codeBlockContainer_EiTO"><div class="codeBlockContent_X2I6"><pre tabindex="0" class="prism-code language-undefined codeBlock_UxnK thin-scrollbar" style="color:#F2F2F2;background-color:#1F1F1F4D"><code class="codeBlockLines_W6UD"><span class="token-line" style="color:#F2F2F2"><span class="token plain">// Read Function</span></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">function isModuleApproved(address _user, address _module) // Read Only Function</span></span><span class="token-line" style="color:#F2F2F2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">// Write Function</span></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">function setApprovalForModule(address _module, bool _approved)</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_V-PD clean-btn">Copy</button></div></div><div class="codeBlockContainer_EiTO"><div class="codeBlockContent_X2I6 javascript"><pre tabindex="0" class="prism-code language-javascript codeBlock_UxnK thin-scrollbar" style="color:#F2F2F2;background-color:#1F1F1F4D"><code class="codeBlockLines_W6UD"><span class="token-line" style="color:#F2F2F2"><span class="token comment" style="color:#666666;font-style:italic">// Approving Asks v1.1</span><span class="token plain"></span></span><span class="token-line" style="color:#F2F2F2"><span class="token plain"></span><span class="token keyword" style="color:#5188f5">const</span><span class="token plain"> approved </span><span class="token operator" style="color:#999999">=</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#5188f5">await</span><span class="token plain"> moduleManagerContract</span><span class="token punctuation" style="color:#999999">.</span><span class="token method function property-access" style="color:#86d7ff">isModuleApproved</span><span class="token punctuation" style="color:#999999">(</span><span class="token plain">ownerAddress</span><span class="token punctuation" style="color:#999999">,</span><span class="token plain"> mainnetDiGiAddresses</span><span class="token punctuation" style="color:#999999">.</span><span class="token property-access maybe-class-name">AsksV1_1</span><span class="token punctuation" style="color:#999999">)</span><span class="token punctuation" style="color:#999999">;</span><span class="token plain"></span></span><span class="token-line" style="color:#F2F2F2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#F2F2F2"><span class="token plain"></span><span class="token keyword control-flow" style="color:#5188f5">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#999999">(</span><span class="token plain">approved </span><span class="token operator" style="color:#999999">===</span><span class="token plain"> </span><span class="token boolean" style="color:#e7b16e">false</span><span class="token punctuation" style="color:#999999">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#999999">{</span><span class="token plain"></span></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#5188f5">await</span><span class="token plain"> moduleManagerContract</span><span class="token punctuation" style="color:#999999">.</span><span class="token method function property-access" style="color:#86d7ff">setApprovalForModule</span><span class="token punctuation" style="color:#999999">(</span><span class="token plain">mainnetDiGiAddresses</span><span class="token punctuation" style="color:#999999">.</span><span class="token property-access maybe-class-name">AsksV1_1</span><span class="token punctuation" style="color:#999999">,</span><span class="token plain"> </span><span class="token boolean" style="color:#e7b16e">true</span><span class="token punctuation" style="color:#999999">)</span><span class="token punctuation" style="color:#999999">;</span><span class="token plain"></span></span><span class="token-line" style="color:#F2F2F2"><span class="token plain"></span><span class="token punctuation" style="color:#999999">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_V-PD clean-btn">Copy</button></div></div><h5><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_WiXH" id="multiple-modules"></a>Multiple Modules<a class="hash-link" href="#multiple-modules" title="Direct link to heading">#</a></h5><p>In addition, a user can batch approve modules in a single transaction by calling <code>setBatchApprovalForModules</code> and passing in an array of module addresses with a boolean.</p><div class="codeBlockContainer_EiTO"><div class="codeBlockContent_X2I6"><pre tabindex="0" class="prism-code language-undefined codeBlock_UxnK thin-scrollbar" style="color:#F2F2F2;background-color:#1F1F1F4D"><code class="codeBlockLines_W6UD"><span class="token-line" style="color:#F2F2F2"><span class="token plain">// Write Function</span></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">function setBatchApprovalForModules(address[] _modules, bool _approved)</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_V-PD clean-btn">Copy</button></div></div><div class="codeBlockContainer_EiTO"><div class="codeBlockContent_X2I6 javascript"><pre tabindex="0" class="prism-code language-javascript codeBlock_UxnK thin-scrollbar" style="color:#F2F2F2;background-color:#1F1F1F4D"><code class="codeBlockLines_W6UD"><span class="token-line" style="color:#F2F2F2"><span class="token comment" style="color:#666666;font-style:italic">// Approving Asks v1.1 and Offers v1.0</span><span class="token plain"></span></span><span class="token-line" style="color:#F2F2F2"><span class="token plain"></span><span class="token keyword" style="color:#5188f5">const</span><span class="token plain"> digiModuleAddresses </span><span class="token operator" style="color:#999999">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#999999">[</span><span class="token plain">mainnetDiGiAddresses</span><span class="token punctuation" style="color:#999999">.</span><span class="token property-access maybe-class-name">AsksV1_1</span><span class="token punctuation" style="color:#999999">,</span><span class="token plain"> mainnetDiGiAddresses</span><span class="token punctuation" style="color:#999999">.</span><span class="token property-access maybe-class-name">OffersV1</span><span class="token punctuation" style="color:#999999">]</span><span class="token punctuation" style="color:#999999">;</span><span class="token plain"></span></span><span class="token-line" style="color:#F2F2F2"><span class="token plain"></span><span class="token keyword control-flow" style="color:#5188f5">await</span><span class="token plain"> moduleManagerContract</span><span class="token punctuation" style="color:#999999">.</span><span class="token method function property-access" style="color:#86d7ff">setBatchApprovalForModules</span><span class="token punctuation" style="color:#999999">(</span><span class="token plain"></span></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">    digiModuleAddresses</span><span class="token punctuation" style="color:#999999">,</span><span class="token plain"> </span></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">    </span><span class="token boolean" style="color:#e7b16e">true</span><span class="token plain"></span></span><span class="token-line" style="color:#F2F2F2"><span class="token plain"></span><span class="token punctuation" style="color:#999999">)</span><span class="token punctuation" style="color:#999999">;</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_V-PD clean-btn">Copy</button></div></div><hr><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_WiXH" id="revoking-access"></a>Revoking Access<a class="hash-link" href="#revoking-access" title="Direct link to heading">#</a></h3><p>At some point, a user might want to revoke DIGI&#x27;s ability to access their assets.
Approvals to DIGI can be revoked at any time and there are two ways to do it.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_WiXH" id="revoking-transfer-helper"></a>Revoking Transfer Helper<a class="hash-link" href="#revoking-transfer-helper" title="Direct link to heading">#</a></h4><p>By revoking access to the Transfer Helper you will remove the ability for all DIGI modules to be able to move the asset.</p><h5><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_WiXH" id="erc-721"></a>ERC-721<a class="hash-link" href="#erc-721" title="Direct link to heading">#</a></h5><div class="codeBlockContainer_EiTO"><div class="codeBlockContent_X2I6 javascript"><pre tabindex="0" class="prism-code language-javascript codeBlock_UxnK thin-scrollbar" style="color:#F2F2F2;background-color:#1F1F1F4D"><code class="codeBlockLines_W6UD"><span class="token-line" style="color:#F2F2F2"><span class="token keyword" style="color:#5188f5">const</span><span class="token plain"> approved </span><span class="token operator" style="color:#999999">=</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#5188f5">await</span><span class="token plain"> erc721Contract</span><span class="token punctuation" style="color:#999999">.</span><span class="token method function property-access" style="color:#86d7ff">isApprovedForAll</span><span class="token punctuation" style="color:#999999">(</span><span class="token plain">ownerAddress</span><span class="token punctuation" style="color:#999999">,</span><span class="token plain"> erc721TransferHelperAddress</span><span class="token punctuation" style="color:#999999">)</span><span class="token punctuation" style="color:#999999">;</span><span class="token plain"></span></span><span class="token-line" style="color:#F2F2F2"><span class="token plain"></span><span class="token keyword control-flow" style="color:#5188f5">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#999999">(</span><span class="token plain">approved </span><span class="token operator" style="color:#999999">===</span><span class="token plain"> </span><span class="token boolean" style="color:#e7b16e">true</span><span class="token punctuation" style="color:#999999">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#999999">{</span><span class="token plain"></span></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#5188f5">await</span><span class="token plain"> erc721Contract</span><span class="token punctuation" style="color:#999999">.</span><span class="token method function property-access" style="color:#86d7ff">setApprovalForAll</span><span class="token punctuation" style="color:#999999">(</span><span class="token plain">erc721TransferHelperAddress</span><span class="token punctuation" style="color:#999999">,</span><span class="token plain"> </span><span class="token boolean" style="color:#e7b16e">false</span><span class="token punctuation" style="color:#999999">)</span><span class="token punctuation" style="color:#999999">;</span><span class="token plain"></span></span><span class="token-line" style="color:#F2F2F2"><span class="token plain"></span><span class="token punctuation" style="color:#999999">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_V-PD clean-btn">Copy</button></div></div><h5><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_WiXH" id="erc-20-1"></a>ERC-20<a class="hash-link" href="#erc-20-1" title="Direct link to heading">#</a></h5><div class="codeBlockContainer_EiTO"><div class="codeBlockContent_X2I6 javascript"><pre tabindex="0" class="prism-code language-javascript codeBlock_UxnK thin-scrollbar" style="color:#F2F2F2;background-color:#1F1F1F4D"><code class="codeBlockLines_W6UD"><span class="token-line" style="color:#F2F2F2"><span class="token keyword" style="color:#5188f5">const</span><span class="token plain"> approvedAmount </span><span class="token operator" style="color:#999999">=</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#5188f5">await</span><span class="token plain"> erc20Contract</span><span class="token punctuation" style="color:#999999">.</span><span class="token method function property-access" style="color:#86d7ff">allowance</span><span class="token punctuation" style="color:#999999">(</span><span class="token plain">ownerAddress</span><span class="token punctuation" style="color:#999999">,</span><span class="token plain"> erc721TransferHelperAddress</span><span class="token punctuation" style="color:#999999">)</span><span class="token punctuation" style="color:#999999">;</span><span class="token plain"></span></span><span class="token-line" style="color:#F2F2F2"><span class="token plain"></span><span class="token keyword control-flow" style="color:#5188f5">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#999999">(</span><span class="token plain">approvedAmount </span><span class="token operator" style="color:#999999">!==</span><span class="token plain"> </span><span class="token string" style="color:#88e7e7">&quot;0&quot;</span><span class="token punctuation" style="color:#999999">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#999999">{</span><span class="token plain"></span></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#5188f5">await</span><span class="token plain"> erc20Contract</span><span class="token punctuation" style="color:#999999">.</span><span class="token method function property-access" style="color:#86d7ff">approve</span><span class="token punctuation" style="color:#999999">(</span><span class="token plain">ownerAddress</span><span class="token punctuation" style="color:#999999">,</span><span class="token plain"> erc721TransferHelperAddress</span><span class="token punctuation" style="color:#999999">,</span><span class="token plain"> </span><span class="token string" style="color:#88e7e7">&quot;0&quot;</span><span class="token punctuation" style="color:#999999">)</span><span class="token punctuation" style="color:#999999">;</span><span class="token plain"></span></span><span class="token-line" style="color:#F2F2F2"><span class="token plain"></span><span class="token punctuation" style="color:#999999">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_V-PD clean-btn">Copy</button></div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_WiXH" id="revoking-module-manager"></a>Revoking Module Manager<a class="hash-link" href="#revoking-module-manager" title="Direct link to heading">#</a></h4><p>If you would like the DIGI Transfer Helpers to still have access to your assets,
but you would like to restrict certain modules you can either revoke a single module or batch revoke.</p><h5><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_WiXH" id="single-module-1"></a>Single Module<a class="hash-link" href="#single-module-1" title="Direct link to heading">#</a></h5><div class="codeBlockContainer_EiTO"><div class="codeBlockContent_X2I6 javascript"><pre tabindex="0" class="prism-code language-javascript codeBlock_UxnK thin-scrollbar" style="color:#F2F2F2;background-color:#1F1F1F4D"><code class="codeBlockLines_W6UD"><span class="token-line" style="color:#F2F2F2"><span class="token keyword" style="color:#5188f5">const</span><span class="token plain"> approved </span><span class="token operator" style="color:#999999">=</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#5188f5">await</span><span class="token plain"> moduleManagerContract</span><span class="token punctuation" style="color:#999999">.</span><span class="token method function property-access" style="color:#86d7ff">isModuleApproved</span><span class="token punctuation" style="color:#999999">(</span><span class="token plain">ownerAddress</span><span class="token punctuation" style="color:#999999">,</span><span class="token plain"> mainnetDiGiAddresses</span><span class="token punctuation" style="color:#999999">.</span><span class="token property-access maybe-class-name">AsksV1_1</span><span class="token punctuation" style="color:#999999">)</span><span class="token punctuation" style="color:#999999">;</span><span class="token plain"></span></span><span class="token-line" style="color:#F2F2F2"><span class="token plain"></span><span class="token keyword control-flow" style="color:#5188f5">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#999999">(</span><span class="token plain">approved </span><span class="token operator" style="color:#999999">===</span><span class="token plain"> </span><span class="token boolean" style="color:#e7b16e">true</span><span class="token punctuation" style="color:#999999">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#999999">{</span><span class="token plain"></span></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#5188f5">await</span><span class="token plain"> moduleManagerContract</span><span class="token punctuation" style="color:#999999">.</span><span class="token method function property-access" style="color:#86d7ff">setApprovalForModule</span><span class="token punctuation" style="color:#999999">(</span><span class="token plain">mainnetDiGiAddresses</span><span class="token punctuation" style="color:#999999">.</span><span class="token property-access maybe-class-name">AsksV1_1</span><span class="token punctuation" style="color:#999999">,</span><span class="token plain"> </span><span class="token boolean" style="color:#e7b16e">false</span><span class="token punctuation" style="color:#999999">)</span><span class="token punctuation" style="color:#999999">;</span><span class="token plain"></span></span><span class="token-line" style="color:#F2F2F2"><span class="token plain"></span><span class="token punctuation" style="color:#999999">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_V-PD clean-btn">Copy</button></div></div><h5><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_WiXH" id="multiple-modules-1"></a>Multiple Modules<a class="hash-link" href="#multiple-modules-1" title="Direct link to heading">#</a></h5><div class="codeBlockContainer_EiTO"><div class="codeBlockContent_X2I6 javascript"><pre tabindex="0" class="prism-code language-javascript codeBlock_UxnK thin-scrollbar" style="color:#F2F2F2;background-color:#1F1F1F4D"><code class="codeBlockLines_W6UD"><span class="token-line" style="color:#F2F2F2"><span class="token keyword" style="color:#5188f5">const</span><span class="token plain"> digiModuleAddresses </span><span class="token operator" style="color:#999999">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#999999">[</span><span class="token plain">mainnetDiGiAddresses</span><span class="token punctuation" style="color:#999999">.</span><span class="token property-access maybe-class-name">AsksV1_1</span><span class="token punctuation" style="color:#999999">,</span><span class="token plain"> mainnetDiGiAddresses</span><span class="token punctuation" style="color:#999999">.</span><span class="token property-access maybe-class-name">OffersV1</span><span class="token punctuation" style="color:#999999">]</span><span class="token punctuation" style="color:#999999">;</span><span class="token plain"> </span><span class="token comment" style="color:#666666;font-style:italic">// Asks v1.1 and Offers v1.0</span><span class="token plain"></span></span><span class="token-line" style="color:#F2F2F2"><span class="token plain"></span><span class="token keyword control-flow" style="color:#5188f5">await</span><span class="token plain"> moduleManagerContract</span><span class="token punctuation" style="color:#999999">.</span><span class="token method function property-access" style="color:#86d7ff">setBatchApprovalForModules</span><span class="token punctuation" style="color:#999999">(</span><span class="token plain"></span></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">    digiModuleAddresses</span><span class="token punctuation" style="color:#999999">,</span><span class="token plain"> </span></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">    </span><span class="token boolean" style="color:#e7b16e">false</span><span class="token plain"></span></span><span class="token-line" style="color:#F2F2F2"><span class="token plain"></span><span class="token punctuation" style="color:#999999">)</span><span class="token punctuation" style="color:#999999">;</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_V-PD clean-btn">Copy</button></div></div><hr><p>Now that you have learned how to approve and revoke tokens to DIGI you are ready to begin interacting with the different DIGI V3 Modules.
You can get started learning about how to sell an NFT <a href="/build/index.html/docs/guides/sell-nft-fixed-price">here</a>.</p></div><footer class="row docusaurus-mt-lg"><div class="col"><a href="https://github.com/digiv3rse/digi-docs/blob/main/docs/guides/v3-approvals.mdx" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_mS5F" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_wj+Z"></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"></div><div class="pagination-nav__item pagination-nav__item--next"></div></nav></div></div><div class="col col--3"><div class="tableOfContents_vrFS thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#required-approvals" class="table-of-contents__link">Required Approvals</a></li><li><a href="#initial-code-setup" class="table-of-contents__link">Initial Code Setup</a></li><li><a href="#approving-a-transfer-helper" class="table-of-contents__link">Approving a Transfer Helper</a></li><li><a href="#approving-modules-in-the-module-manager" class="table-of-contents__link">Approving Modules in the Module Manager</a></li><li><a href="#revoking-access" class="table-of-contents__link">Revoking Access</a></li></ul></div></div></div></div></main></div></div><div class="footer_rm3y"><div class="footerLinksFlexbox_hYX3"><a class="textFlexbox_b5P+" href="https://digiv3rse.xyzmmunity" target="_blank" rel="noopener noreferrer"><div class="footerTitleFlexbox_A+cN"><svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg" class="footerIcon_RMBq"><path d="M18.333.833H1.667A1.667 1.667 0 000 2.5v10.833A1.667 1.667 0 001.667 15h2.5v5l6.666-5h7.5A1.667 1.667 0 0020 13.333V2.5A1.667 1.667 0 0018.333.833z" fill="#F2F2F2"></path></svg><h3 class="footerTitle_3GhG">Questions?</h3></div><p class="footerParagraph_kU2S">Get help in the #developers channel on Discord.</p></a><a href="https://twitter.com/digiv3rse" target="_blank" rel="noopener noreferrer" class="textFlexbox_b5P+"><div class="footerTitleFlexbox_A+cN"><svg width="20" height="18" viewBox="0 0 20 18" fill="none" xmlns="http://www.w3.org/2000/svg" class="footerIcon_RMBq"><path d="M20 2.833c-.75.334-1.5.584-2.333.667.833-.5 1.5-1.333 1.833-2.25-.833.5-1.667.833-2.583 1a4.034 4.034 0 00-3-1.333A4.09 4.09 0 009.833 5c0 .333 0 .667.084.917-3.5-.167-6.5-1.834-8.5-4.334C1 2.25.833 2.917.833 3.667c0 1.416.75 2.666 1.834 3.416-.667 0-1.334-.166-1.834-.5v.084c0 2 1.417 3.666 3.25 4-.333.083-.666.166-1.083.166-.25 0-.5 0-.75-.083.5 1.667 2 2.833 3.833 2.833-1.416 1.084-3.166 1.75-5.083 1.75-.333 0-.667 0-1-.083 1.833 1.167 4 1.833 6.25 1.833 7.583 0 11.667-6.25 11.667-11.666v-.5c.833-.584 1.5-1.334 2.083-2.084z" fill="#F2F2F2"></path></svg><h3 class="footerTitle_3GhG">Stay updated</h3></div><p class="footerParagraph_kU2S">Follow us on Twitter for release updates.</p></a><a href="./docs/security" class="textFlexbox_b5P+"><div class="footerTitleFlexbox_A+cN"><svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" class="footerIcon_RMBq"><path fill="url(#shield-64_svg__pattern0)" d="M0 0h20v20H0z"></path><defs><pattern id="shield-64_svg__pattern0" patternContentUnits="objectBoundingBox" width="1" height="1"><use xlink:href="#shield-64_svg__image0_813_5" transform="scale(.01563)"></use></pattern><image id="shield-64_svg__image0_813_5" width="64" height="64" xlink:href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAD80lEQVR4nOWbTahWRRzGn/9FLhISIiIoFlFBYSJoHys34tZFi1YRhhIW0Spw4cI20UJCwkULVyEhYSBIuLmQ3cK0rnq1MqxUVExFyy4i6aKr99di3iv53vMxcz5mzvv2W56ZOe/z/N+ZOfNpSgDwkqTXJa2VdE/SUUl7zOxECj1RAEaAl4HvyOcIsAEYSa23UXqmThUY72cS2JBad22ANcB4gPF+vsE1l8ECWAzsBu7XMD/LfeATYElqX6Xg2vlm4M8GjPfzF7CFrvYPwCrgcAvG+zkCrErt9wHAQuAjYDqC+VmmgV3AopTGR4G3gRsRjfdzA3gLGI1pfB6wETiX0Hg/vwGvAfNC/ViA8aclvSLpTUlPhP5QJC5J2i3pczO74FMgNwC4gch6Sc9KWilpeQMCYzEj6YqknyT9KmnMzL70Lg28k7RCt8O7WV7n1ABggaSrkh6tFPvuclvSY2Z2+78PswYVoxo+85LzNL//YVYA/pZrQ8PGjKRb/Q+zAnBPrroMG3flvD3EnACY2YykqRiKIjPV8/YQeROLmy2LSUGmp7wAXG9RSCoyPeUF4FqLQlKR6SkvAL+3KCQVmZ7yAuA1jh4wLmc9/D8F4HzWw7wAnNfwDYb8A2BmUxquL8GUpD+yEooWGH9uR0sSzmQNgqTiAPzQkpgU5HopCsBkC0JSMZGXUBSAYy0IScXRvITCNUHgqqRljcuJy3UzW5qXWLbL8nWzWpLwfVFiWQDGGxSSirGixLIm8LikiyoPVJd5qmiJvNCYmV2WdKZxSfE4W7Y/4PPPHmhITApKtfsEYH8DQlKxryyD19YY8IvcDtEgcdbMninL5Nu5fVpTTAr2+mTyrQHL5L4G8bah6/GPXO9/pSyjVw0ws2uSDtZVFZGDPualsO/7ropiUvCxb0bv8wGSBExI6vqxtZNm9rxv5tAR3geB+VPwfkjm0BowIje3fiGkXEROSnoxb/Uni6Aa0HvxtlBVEdkaYl6qMMnpHTX5IrRcBA6Y2VehhYKawCzAk5JOS3qkSvkWuCvpOTO7FFqw0jS3N8PaXqVsS2yvYl6qWAMkd15QbsFkbdV3NMS3ktaZ2ZzDDz5UDoD0YMHkR0kL67ynBrckra7670s1V3p6CyablGYbbUbSpjrmGwN4L8G5v6ABT6vg7gnsjWj+M7p2bwB3enwsgvlDwJzzfp0AWEC9O0JlHMadZO0uvSAcasH8ODAYJ1iB+cC+Bs3vB7oy6vQD1zF+2ID5nVS4CNEZgFeBOxWM3wE2ptbfCMAKwm6OngZWptbdKLh+YQfFt8umcc2mm5+5JsBdp53MMD/JIF6TrQLu5tkW4DgwAbxBoo7uX6zwal/ku7XOAAAAAElFTkSuQmCC"></image></defs></svg><h3 class="footerTitle_3GhG">Found a Bug</h3></div><p class="footerParagraph_kU2S">Learn more here.</p></a></div><div class="logoFlexbox_QG+z"><svg id="homepageLogo_svg__Layer_1" xmlns="http://www.w3.org/2000/svg" x="0" y="0" viewBox="0 0 3487 1200" xml:space="preserve" class="digiLogo_muXP"><style>.homepageLogo_svg__st0{fill:#fff}</style><path class="homepageLogo_svg__st0" d="M0 1180.1v-212l499.8-752H56.2V19.8h696.6v182.1l-520.7 782h541.2v196.3H0v-.1z"></path><path class="homepageLogo_svg__st0" d="M758.4 607.1c0-138.2 20.5-252.1 61.3-341.5C860.6 176.2 914 109.5 980 65.8 1046 21.9 1125.9 0 1219.9 0c136.2 0 247.1 52 332.8 155.9 85.7 104 128.6 252 128.6 444.1s-45.4 345.9-136.2 455.1c-79.7 96.6-187.9 144.8-324.6 144.8s-246.4-47.7-326.1-143.2c-90.7-109.2-136.1-259.1-136-449.6zm197.9-7.9c0 133.5 25.4 233.6 76.1 300.4 50.7 66.8 113.6 100.2 188.7 100.2 75 0 138.2-33.1 187.9-99.3s74.5-167.9 74.5-305.2c0-137.2-24.2-234-72.6-298.4-48.3-64.3-111.7-96.6-189.9-96.6s-141.9 32.4-191 97.4c-49.2 64.8-73.7 165.3-73.7 301.5zM1735.2 1180.1V19.8h404.4c103.4 0 177.3 10.4 221.6 31.2 44.4 20.9 80.8 57 109.2 108.4 28.5 51.4 42.7 113.1 42.7 184.8 0 90.8-21.7 163.8-65.3 219.3-43.4 55.5-105.2 90.3-185.5 104.5 41.2 29.5 75.2 61.9 102.1 97 26.9 35.1 63.6 98 110 188.8l115.6 226.4h-229.2l-139.1-252.5c-50-91.3-84-148.4-102-171.4s-37-38.8-57-47.5c-20.1-8.7-52.2-13.1-96.6-13.1h-39.6v484.4h-191.3zm191.6-669.6h142.5c87.1 0 142.5-3.8 166.2-11.5 23.8-7.7 43-23.1 57.8-46.3 14.7-23.2 22.1-54 22.1-92.6s-7.4-66.6-22.1-89c-14.8-22.4-34.8-37.8-60.2-46.3-18-5.8-69.9-8.7-155.9-8.7h-150.4v294.4z"></path><path class="homepageLogo_svg__st0" d="M3487 1180.1h-208.2l-83.3-262.8h-380.9l-78.7 262.8h-204.2L2902.2 19.8h203.5L3487 1180.1zM3133.6 721l-131.4-430.6L2873.3 721h260.3z"></path></svg></div></div></div>
<script src="/build/index.html/assets/js/runtime~main.5f8fb016.js"></script>
<script src="/build/index.html/assets/js/main.215a8fc0.js"></script>
</body>
</html>